<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Ames - Trung tâm Anh ngữ số 1 Đà Nẵng</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Ames - Trung tâm Anh ngữ số 1 Đà Nẵng">
        
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="assets/plugins/fontawesome/js/all.min.js"></script>
    
    <!-- App CSS -->  
    <link id="theme-style" rel="stylesheet" href="assets/css/portal.css">

</head> 

<body class="app" onload="lay_thong_tin_gv1()">   	
    <header class="app-header fixed-top">	   	            
        <div class="app-header-inner">  
	        <div class="container-fluid py-2">
		        <div class="app-header-content"> 
		            <div class="row justify-content-between align-items-center">
			        
				    <div class="col-auto">
					    <a id="sidepanel-toggler" class="sidepanel-toggler d-inline-block d-xl-none" href="#">
						    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg>
					    </a>
				    </div><!--//col-->
		            <div class="search-mobile-trigger d-sm-none col">
			            <i class="search-mobile-trigger-icon fas fa-search"></i>
			        </div><!--//col-->
		            <div class="app-search-box col">

		            </div><!--//app-search-box-->
		            
		            <div class="app-utilities col-auto">
			            <div class="app-utility-item app-notifications-dropdown dropdown">    

			
		
			            <div class="app-utility-item app-user-dropdown dropdown">
				            <a class="dropdown-toggle" id="user-dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">Admin</a>
				            <ul class="dropdown-menu" aria-labelledby="user-dropdown-toggle">
								<li><a class="dropdown-item" href="login.html">Đăng xuất</a></li>

							</ul>
			            </div><!--//app-user-dropdown--> 
		            </div><!--//app-utilities-->
		        </div><!--//row-->
	            </div><!--//app-header-content-->
	        </div><!--//container-fluid-->
        </div><!--//app-header-inner-->
        <div id="app-sidepanel" class="app-sidepanel"> 
	        <div id="sidepanel-drop" class="sidepanel-drop"></div>
	        <div class="sidepanel-inner d-flex flex-column">
		        <a href="#" id="sidepanel-close" class="sidepanel-close d-xl-none">&times;</a>
		        <div class="app-branding">
		            <a class="app-logo" href="index_admin.html"><img class="logo-icon me-2" src="assets/images/app-logo.svg" alt="logo"><span class="logo-text">AMES</span></a>
	
		        </div><!--//app-branding-->  
		        
			    <nav id="app-nav-main" class="app-nav app-nav-main flex-grow-1">
				    <ul class="app-menu list-unstyled accordion" id="menu-accordion">
					
					
					
					    <li class="nav-item">
					        <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
					        <a class="nav-link active" href="index_admin.html">
						        <span class="nav-icon">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
										<path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
										<path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
									</svg>
						         </span>
		                         <span class="nav-link-text">Thông tin tài khoản</span>
					        </a><!--//nav-link-->
					    </li><!--//nav-item-->
						
					    <li class="nav-item">
					        <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
					        <a class="nav-link " href="add_user_admin.html">
						        <span class="nav-icon">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-plus-fill" viewBox="0 0 16 16">
  <path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
  <path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"/>
</svg>
						         </span>
		                         <span class="nav-link-text">Tạo tài khoản người dùng</span>
					        </a><!--//nav-link-->
					    </li><!--//nav-item-->
						
					    <li class="nav-item">
					        <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
					        <a class="nav-link" href="quanly_admin.html">
						        <span class="nav-icon">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen-fill" viewBox="0 0 16 16">
  <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001z"/>
</svg>
						         </span>
		                         <span class="nav-link-text">Quản lý tài khoản</span>
					        </a><!--//nav-link-->
					    </li><!--//nav-item-->
					 
					  
  
							    
				    </ul><!--//app-menu-->
			    </nav><!--//app-nav-->

		       
	        </div><!--//sidepanel-inner-->
	    </div><!--//app-sidepanel-->
    </header><!--//app-header-->
    
   <div class="app-wrapper">
	    
	    <div class="app-content pt-3 p-md-3 p-lg-4">
		    <div class="container-xl">			    
			    <h1 class="app-page-title">Đổi mật khẩu</h1>
			    <hr class="mb-4">
                <div class="row g-4 settings-section">
	    
					
	                <div class="col-12 col-md-8 " >
		                <div class="app-card app-card-settings shadow-sm  p-4">
						    
						    <div class="app-card-body">
							 
							 
								    <div class="mb-3">
									    <label for="setting-input-1" class="form-label">Mật khẩu hiện tại</label>
									    <input type="password" class="form-control" id="old_pass_gv"  required>
									</div>
									<div class="mb-3">
									    <label for="setting-input-2" class="form-label">Mật khẩu mới</label>
									    <input type="password" class="form-control" id="new_pass_gv"  required>
									</div>
								    <div class="mb-3">
									    <label for="setting-input-3" class="form-label">Nhập lại mật khẩu mới</label>
									    <input type="password" class="form-control" id="re_new_pass_gv" required>
									</div>
									<button onclick="gv_doi_mat_khau1()" type="submit" class="btn app-btn-primary" >Cập nhật</button>
							  
								
						    </div><!--//app-card-body-->
						    
						</div><!--//app-card-->
	                </div>
					
                </div><!--//row-->
                <hr class="my-4">
              
                
               
              
	
	    
	    <footer class="app-footer">
		    <div class="container text-center py-3">
		         <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
            <small class="copyright">Designed with <i class="fas fa-heart" style="color: #fb866a;"></i> by <a class="app-link" href="#" target="_blank">Nguyen Le Tai</a> for developers</small>
		       
		    </div>
	    </footer><!--//app-footer-->
	    
    </div><!--//app-wrapper-->    	

	</div>
	</div>
 
    <!-- Javascript -->          
    <script src="assets/plugins/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>  


    
    <!-- Page Specific JS -->
    <script src="assets/js/app.js"></script> 
	<script>
function lay_thong_tin_gv1(){
    var url = `https://amesbe.herokuapp.com/api/general/info`
    fetch(url,{
        method:"GET",
        headers:{
            'Content-Type': 'application/json',
            'Authorization': sessionStorage.getItem("Token")
        }
    }).then(function(reponse){
        if(reponse.status !=200){
            alert('Xảy ra lỗi!')
        }
        else {
            return reponse.json()

        }
		
    }).then(function(json){    window.sessionStorage.setItem("MK",json.MK)})
			
}	

function gv_doi_mat_khau1(){
    var old_pass_gv = document.getElementById("old_pass_gv").value;
    var new_pass_gv = document.getElementById("new_pass_gv").value;
    var re_new_pass_gv = document.getElementById("re_new_pass_gv").value;
	
	console.log(sessionStorage.getItem("MK"))

    if (old_pass_gv != sessionStorage.getItem("MK")){
        alert('Nhập sai mật khẩu hiện tại!'); 
    } 
    else {
        if (new_pass_gv != re_new_pass_gv){
            alert('Nhập lại mật khẩu mới không giống nhau!');
        } 
        else {
            if (old_pass_gv == new_pass_gv){
                alert('Mật khẩu mới phải khác mật khẩu cũ!');
            }
            else{
                var url = `https://amesbe.herokuapp.com/api/general/change/${new_pass_gv}`;
                fetch(url,{
                    method:"POST",
                    headers:{
                        'Content-Type': 'application/json',
                        'Authorization': sessionStorage.getItem("Token")
                    }
                }).then(function(response) { 
                    if (response.status != 200){
                        alert('Xảy ra lỗi!')
                    } else {
                        return response.json
                    }
                }).then(function(json){
                    window.sessionStorage.setItem("MK",new_pass_gv);
				    alert("Cập nhật thành công")
                })
            }
        }
    }
			
}

	</script>

</body>
</html> 

