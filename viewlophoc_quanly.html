<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Ames - Trung tâm Anh ngữ số 1 Đà Nẵng</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Ames - Trung tâm Anh ngữ số 1 Đà Nẵng">
        
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- FontAwesome JS-->
    <script defer src="assets/plugins/fontawesome/js/all.min.js"></script>
    
    <!-- App CSS -->  
    <link id="theme-style" rel="stylesheet" href="assets/css/portal.css">
	
	
<style>


#listlophoc td, #listlophoc th {
  border: 1px solid #ddd;
  padding: 8px;
}

#listlophoc tr:nth-child(even){background-color: #f2f2f2;}

#listlophoc tr:hover {background-color: #ddd;}

#listlophoc th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #04AA6D;
  color: white;
}
</style>

</head> 

<body class="app">   	
    <header class="app-header fixed-top">	   	            
        <div class="app-header-inner">  
	        <div class="container-fluid py-2">
		        <div class="app-header-content"> 
		            <div class="row justify-content-between align-items-center">
			        
				    <div class="col-auto">
					    <a id="sidepanel-toggler" class="sidepanel-toggler d-inline-block d-xl-none" href="#">
						    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg>
					    </a>
				    </div><!--//col-->
		            <div class="search-mobile-trigger d-sm-none col">
			            <i class="search-mobile-trigger-icon fas fa-search"></i>
			        </div><!--//col-->
		            <div class="app-search-box col">

		            </div><!--//app-search-box-->
		            
		            <div class="app-utilities col-auto">
			            <div class="app-utility-item app-notifications-dropdown dropdown">    

			
		
			            <div class="app-utility-item app-user-dropdown dropdown">
				            <a class="dropdown-toggle" id="user-dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">Admin</a>
				            <ul class="dropdown-menu" aria-labelledby="user-dropdown-toggle">

								<li><a class="dropdown-item" href="login.html">Đăng xuất</a></li>
							</ul>
			            </div><!--//app-user-dropdown--> 
		            </div><!--//app-utilities-->
		        </div><!--//row-->
	            </div><!--//app-header-content-->
	        </div><!--//container-fluid-->
        </div><!--//app-header-inner-->
        <div id="app-sidepanel" class="app-sidepanel"> 
	        <div id="sidepanel-drop" class="sidepanel-drop"></div>
	        <div class="sidepanel-inner d-flex flex-column">
		        <a href="#" id="sidepanel-close" class="sidepanel-close d-xl-none">&times;</a>
		        <div class="app-branding">
		            <a class="app-logo" href="index_quanly.html"><img class="logo-icon me-2" src="assets/images/app-logo.svg" alt="logo"><span class="logo-text">AMES</span></a>
	
		        </div><!--//app-branding-->  
		        
			    <nav id="app-nav-main" class="app-nav app-nav-main flex-grow-1">
				    <ul class="app-menu list-unstyled accordion" id="menu-accordion">
					
					
					
					   <li class="nav-item">
					        <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
					        <a class="nav-link " href="index_quanly.html">
						        <span class="nav-icon">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
										<path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
										<path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
									</svg>
						         </span>
		                         <span class="nav-link-text">Thông tin tài khoản</span>
					        </a><!--//nav-link-->
					    </li><!--//nav-item-->
						
						
					    <li class="nav-item">
					        <!--//Bootstrap Icons: https://icons.getbootstrap.com/ -->
					        <a class="nav-link active " href="listlophoc_quanly.html">
						        <span class="nav-icon">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-journal-bookmark-fill" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M6 1h6v7a.5.5 0 0 1-.757.429L9 7.083 6.757 8.43A.5.5 0 0 1 6 8V1z"/>
  <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/>
  <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/>
</svg>
						         </span>
		                         <span class="nav-link-text">Quản lý lớp học</span>
					        </a><!--//nav-link-->
					    </li><!--//nav-item-->
					 
					  
  
							    
				    </ul><!--//app-menu-->
			    </nav><!--//app-nav-->

		       
	        </div><!--//sidepanel-inner-->
	    </div><!--//app-sidepanel-->
    </header><!--//app-header-->
    
   <div class="app-wrapper">
   
 	    <div class="app-content pt-3 p-md-3 p-lg-4">

		    <div class="container-xl">  
   

				<div class="row g-4 settings-section">  
   
	    
	                <div class="col-12 col-md-8 " >
		                <div class="app-card app-card-settings shadow-sm  p-4">
						    
							<div class="container">
								<div class="row">
									<div class="col"> <label  class="form-label">Thông tin lớp học: </label> </div>


									<div class="col"> 
									<a onclick="laylophoc()" class="btn btn-sm bg-primary text-white" data-bs-toggle="modal" data-bs-target="#myModal1">Chỉnh sửa</a>
									</div>
									
									<div class="col"> 
									<a onclick="xemlich()" class="btn btn-sm bg-primary text-white" >Xem lịch</a>
									</div>									
								</div>
								<br>
    
							</div>
							
							<div class="container">
								<div class="row">
									<div class="col"> 
									<label  class="form-label">Mã lớp: </label> 
                               <input id="malop" name="malop" type="text" class="form-control_label_hv"   disabled>									
									</div>


									<div class="col"> 
									<label  class="form-label">Phòng:  </label> 
                               <input id="phonghoc" name="phonghoc" type="text" class="form-control_label_hv"   disabled>
									</div>
								</div>
								<br>
    
							</div>	

							<div class="container">
								<div class="row">
									<div class="col"> 
									<label  class="form-label">Tên lớp: </label> 
                               <input id="tenlop" name="tenlop" type="text" class="form-control_label_hv"   disabled> 									
									</div>


									<div class="col"> 
									<label  class="form-label">Tên gv:  </label> 
                               <input id="giangvien" name="giangvien" type="text" class="form-control_label_hv"   disabled> 	
									</div>
								</div>
								<br>
    
							</div>		

							<div class="container">
								<div class="row">
									<div class="col"> 
									<label  class="form-label">Giờ học: </label> 
                               <input id="giohoc" name="giohoc" type="text" class="form-control_label_hv"   disabled> 										
									</div>



								</div>
								<br>
    
							</div>								
						    
						</div><!--//app-card-->
	                </div>
					

	                <div class="col-12 col-md-4">
	
									<div class="d-grid gap-2 col-6 mx-auto">
									<a href="listlophoc_quanly.html" class="btn btn-lg bg-primary text-white" >Trở lại</a></br>
									<a href="#" class="btn btn-lg bg-primary text-white" data-bs-toggle="modal" data-bs-target="#myModal" >Xóa lớp học</a></br>
									<a href="xoahocvien_quanly.html" class="btn btn-lg bg-primary text-white " >Xóa học viên</a></br>
									<a href="themhocvien_quanly.html" class="btn btn-lg bg-primary text-white " >Thêm học viên</a></br>
									</div>

									
	                </div>
              
              
               </div>
			   
			    <h3 class="app-page-title">Danh sách lớp học</h3>
			   	<div class="row g-4 settings-section">
				
					    <div class="app-card app-card-orders-table shadow-sm mb-5">
						    <div class="app-card-body">
							    <div class="table-responsive">
							        <table class="table app-table-hover mb-0 text-left" id="listlophoc">
										<thead>
											<tr>
												<th class="cell text-center">STT</th>
												<th class="cell text-center">Mã học viên</th>
												<th class="cell text-center">Tên học viên</th>


											</tr>
										</thead>
										<tbody id="data2">
											
		
										</tbody>
									</table>
						        </div><!--//table-responsive-->
						       
						    </div><!--//app-card-body-->		
						</div><!--//app-card-->				

				</div>
              
	    </div>
		
		


									<!-- The Modal  -->
									<div class="modal" id="myModal">
									  <div class="modal-dialog modal-dialog-centered">
										<div class="modal-content">

										  <!-- Modal Header -->
										  <div class="modal-header">
											<h5 class="modal-title text-center">Xác nhận</h5>
											<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
											
										  </div>

										  <!-- Modal body -->
										  <div class="modal-body text-center">
											Bạn có chắc chắn muốn xóa lớp học này không?
										  </div>

										  <!-- Modal footer -->
										  <div class="modal-footer">
											
								<div class="container">
								<div class="row">
									<div class="col">   
									<div class=" text-center "> 

									<button type="button" class="btn btn-danger text-white" data-bs-dismiss="modal">Không</button> 
									</div> 
									</div>
									
									<div class="col">   
									<div class=" text-center "> 

									<a onclick="del_lophoc()" class="btn btn-sm bg-success text-white" data-bs-dismiss="modal">Có</a>
									</div> 
									</div>
									
								</div>
								<br>
							</div>
										  </div>

										</div>
									  </div>
									</div>	




											<!-- The Modal 1-->
									<div class="modal" id="myModal1">
									  <div class="modal-dialog modal-dialog-centered">
										<div class="modal-content">

										  <!-- Modal Header -->
										  <div class="modal-header">
											<h5 class="modal-title text-center">Chỉnh sửa lớp học</h5>
											<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
											
										  </div>

										  <!-- Modal body -->
										  <div class="modal-body text-center">
										
										<table style="width:100%">
										  <tr>
											<td><label  class="form-label">Mã lớp: </label></td>
											<td>
												<input type="text" id="malop_doi" name="malop_doi" required class="form-control" value=""  disabled>
											</td>

										  </tr>
										  
										  
										  <tr>
											<td><label  class="form-label">Tên lớp: </label></td>
											<td>
												<input type="text" id="tenlop_doi" name="tenlop_doi" required class="form-control" value="" >
											</td>

										  </tr>		

										  <tr>
											<td><label  class="form-label">Giờ học: </label></td>
											<td>
												<input type="text" id="giohoc_doi" name="giohoc_doi" required class="form-control" value="" >
											</td>

										  </tr>											  

										  <tr>
											<td><label  class="form-label">Giảng viên: </label></td>
											<td>
												<input type="text" id="giangvien_doi" name="giangvien_doi" required class="form-control" value="" disabled >
											</td>

										  </tr>	

										  <tr>
											<td><label  class="form-label">Phòng: </label></td>
											<td>
												<input type="text"  id="phong_doi" name="phong_doi" required class="form-control" value="" >
											</td>

										  </tr>	


										</table>										
																				
										  </div>

										  <!-- Modal footer -->
										  <div class="modal-footer">
											
								<div class="container">
								<div class="row">
									<div class="col">   
									<div class=" text-center "> 

									<button type="button" class="btn btn-danger text-white" data-bs-dismiss="modal">Đóng</button> 
									</div> 
									</div>
									
									<div class="col">   
									<div class=" text-center "> 

									<a onclick="chinhlophoc()" class="btn btn-sm bg-primary text-white" data-bs-dismiss="modal">Cập nhật</a>
									</div> 
									</div>
									
								</div>
								<br>
							</div>
										  </div>

										</div>
									  </div>
									</div>									



	    
	    <footer class="app-footer">
		    <div class="container text-center py-3">
		         <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
            <small class="copyright">Designed with <i class="fas fa-heart" style="color: #fb866a;"></i> by <a class="app-link" href="#" target="_blank">Nguyen Le Tai</a> for developers</small>
		       
		    </div>
	    </footer><!--//app-footer-->
	    
    </div><!--//app-wrapper-->    	

 
    <!-- Javascript -->          
    <script src="assets/plugins/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>  


    
    <!-- Page Specific JS -->
    <script src="assets/js/app.js"></script> 
	
	<script>
	const queryString = window.location.search;
	let del_str=queryString.replace('?', '');
	console.log(del_str);
	laythongtin(del_str);
	
	
	
	function laythongtin(id){
		document.getElementById("user-dropdown-toggle").innerHTML = sessionStorage.getItem("HoTen")
	
	   var url = `https://amesbe.herokuapp.com/api/manager/${id}`
    console.log(url)
    fetch(url,{
        method:"GET",
        headers:{
            'Content-Type': 'application/json',
            'Authorization': 'eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vRW5nbGlzaENlbnRlci5jb20vIiwic3ViIjoiUUwxMDAwMDAxIn0.iIN7ejXmrqBxPmuB8TO4YPRjG_8O0WJ2zK6TJyjtLQE'
        }
    }).then((reponse)=>{
           if(reponse.ok){
			   reponse.json().then((json)=>{
				console.log(json)
				
				let hocvienData=json.HocVien	
					
					document.getElementById("malop").value = json.MaLop;		
					document.getElementById("phonghoc").value = json.PhongHoc;
					document.getElementById("tenlop").value = json.TenLop;
					document.getElementById("giangvien").value = json.TenGiangVien;
					document.getElementById("giohoc").value = json.GioHoc;	
					
				    window.sessionStorage.setItem("malop_xl",json.MaLop);
					window.sessionStorage.setItem("magv_xl",json.MaGiangVien);
					window.sessionStorage.setItem("ds_xl",json.HocVien);		

				var cry = "";
					
				var dem=1
				for(i in hocvienData){
					
					cry += "<tr>"
					cry += `<td class="cell text-center"> ${dem} </td>`;
					cry += `<td class="cell text-center"> ${i} </td>`;
					cry += `<td class="cell text-center"> ${hocvienData[i]} </td>`;"<tr>";
						
					dem++
				}				
				
					document.getElementById("data2").innerHTML=cry				
					
			   })
		   }
		   
		   
    }).catch((error)=>{
     console.log(object)
})
}



	</script>	
	
	<script>
	function laythongtin111(id){

	
	   var url = `https://amesbe.herokuapp.com/api/account/${id}`
    console.log(url)
    fetch(url,{
        method:"GET",
        headers:{
            'Content-Type': 'application/json',
            'Authorization': 'eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vRW5nbGlzaENlbnRlci5jb20vIiwic3ViIjoiYWRtaW4ifQ.RnuaT2IuMgMlKtowFP8zJDASCRY54XFe7K6fRPNEgKM'
        }
    }).then((reponse)=>{
           if(reponse.ok){
			   reponse.json().then((json)=>{
				console.log(json.HoTen)
				let t= json.HoTen
				 

	
			   })
		   }
		   
		   
    }).catch((error)=>{
     console.log(object)
})
}	

	function del_lophoc(){

	const queryString = window.location.search;
	let id=queryString.replace('?', '');
	
	var url = `https://amesbe.herokuapp.com/api/manager/${id}`
    console.log(url)
    fetch(url,{
        method:"DELETE",
        headers:{
            'Content-Type': 'application/json',
            'Authorization': 'eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vRW5nbGlzaENlbnRlci5jb20vIiwic3ViIjoiUUwxMDAwMDAxIn0.iIN7ejXmrqBxPmuB8TO4YPRjG_8O0WJ2zK6TJyjtLQE'
        }
    }).then((reponse)=>{
		if(reponse.ok) alert("xóa lớp học thành công")
		else alert("xóa tài khoản thất bại")
			window.location.replace("./listlophoc_quanly.html")		   
    }).catch((error)=>{
    console.log(object)
})
}	
	
	</script>
	
<script>
	function laylophoc(){
	
		const queryString4 = window.location.search;
	    let id4=queryString4.replace('?', '');

	
	   var url = `https://amesbe.herokuapp.com/api/manager/${id4}`
    console.log(url)
    fetch(url,{
        method:"GET",
        headers:{
            'Content-Type': 'application/json',
            'Authorization': 'eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vRW5nbGlzaENlbnRlci5jb20vIiwic3ViIjoiUUwxMDAwMDAxIn0.iIN7ejXmrqBxPmuB8TO4YPRjG_8O0WJ2zK6TJyjtLQE'
        }
    }).then((reponse)=>{
           if(reponse.ok){
			   reponse.json().then((json)=>{
				console.log(json)
				 
				    document.getElementById("malop_doi").value = json.MaLop;
					document.getElementById("tenlop_doi").value = json.TenLop;
					document.getElementById("giohoc_doi").value = json.GioHoc;
					document.getElementById("giangvien_doi").value = json.MaGiangVien+"-"+json.TenGiangVien;
					document.getElementById("phong_doi").value = json.PhongHoc;

	
			   })
		   }
		   
		   
    }).catch((error)=>{
     console.log(object)
})
}

	function chinhlophoc(){
	const queryString6 = window.location.search;
	let id5=queryString6.replace('?', '');
	
	var giangvien = document.querySelector('input[name="giangvien_doi"]').value
	var malop = document.querySelector('input[name="malop_doi"]').value
	var tenlop = document.querySelector('input[name="tenlop_doi"]').value
	var giohoc = document.querySelector('input[name="giohoc_doi"]').value
	var phong = document.querySelector('input[name="phong_doi"]').value	


	var magv=giangvien.substr(0, 9);
	var tengv=giangvien.substr(10, );


	
	
	var formData ={
    "PhongHoc": phong,
    "MaLop": malop,
    "TenGiangVien": tengv,
    "MaGiangVien": magv,
    "TenLop": tenlop,
    "GioHoc": giohoc
	};
	
	var url = `https://amesbe.herokuapp.com/api/manager/${id5}/updateInfor` 
    console.log(url)
    fetch(url,{
        method:"PUT",
        headers:{
            'Content-Type': 'application/json',
            'Authorization': 'eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vRW5nbGlzaENlbnRlci5jb20vIiwic3ViIjoiUUwxMDAwMDAxIn0.iIN7ejXmrqBxPmuB8TO4YPRjG_8O0WJ2zK6TJyjtLQE'
        },
		body: JSON.stringify(formData)
    }).then((reponse)=>{
           if(reponse.ok){
			   reponse.json().then((json)=>{
				console.log(json)
			
				
	
			   })
		   }
		   
		   
    }).catch((error)=>{
     console.log(object)
})
						alert("cập nhật thành công")
						
					
	}

	</script>
 
	<script>
	
		const queryString8 = window.location.search;
	    let id8=queryString8.replace('?', '');
	    window.sessionStorage.setItem("URL",id8);
		

	</script>

<script>
function xemlich(){

	var formData ={

    "MaLop": "TC-01",
    "MaGiangVien": "GV1000001",
    "students": [
        "HV1000001",
        "HV1000002",
        "HV1000003",
	    "HV1000004",
	    "HV1000007",
        "HV1000017"
    ]


	};	

	   var url = `https://amesbe.herokuapp.com/api/manager/XemLich`
    console.log(url)
    fetch(url,{
        method:"GET",
        headers:{
            'Content-Type': 'application/json',
            'Authorization': 'eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vRW5nbGlzaENlbnRlci5jb20vIiwic3ViIjoiUUwxMDAwMDAxIn0.iIN7ejXmrqBxPmuB8TO4YPRjG_8O0WJ2zK6TJyjtLQE'
        },
		body: JSON.stringify(formData)
    }).then((reponse)=>{
           if(reponse.ok){
			   reponse.json().then((json)=>{
				console.log(json)
				
				
			
					
			   })
		   }
		   
		   
    }).catch((error)=>{

})
}

</script>

</body>
</html> 

